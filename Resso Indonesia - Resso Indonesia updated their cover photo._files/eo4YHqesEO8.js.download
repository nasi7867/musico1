;/*FB_PKG_DELIM*/

__d("MTimelineLandscapeCoverCrop",["DOM","MViewport","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=!1;function a(a){if(h)return;h=!0;function b(){var b=d("MViewport").isLandscape(),e=d("DOM").scry(document.body,"div","landscapeCoverCrop")[0],f=d("DOM").scry(document.body,"*","cover-photo")[0];if(!e||!f)return;if(b){b=d("MViewport").getUseableHeight();var g=Math.max(window.innerHeight,window.innerWidth);g=g/a.aspectRatio;b=Math.round(b-a.bottomPadding);g=Math.round((g-b)/2);e.style.height=b+"px";f.style.bottom=g+"px"}else e.style.height="",f.style.bottom="";c("Stratcom").invoke("m:landscape-cover-crop:complete")}c("Stratcom").listen("m:orientation-resize:complete",null,function(){c("setTimeoutAcrossTransitions")(b,0)});b()}g.main=a}),98);
__d("MReactionUnitViewportTracking",["DOM","MLegacyDataStore","MViewportTracking","MarauderLogger","Stratcom","ge"],(function(a,b,c,d,e,f,g){"use strict";var h="reaction-unit-logging",i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.onUnload=function(){c.startRecordingTimeTrackingData()},a)||babelHelpers.assertThisInitialized(c)}var e=a.prototype;e.getDataFromConfig=function(a){var b=this;this.$MReactionUnitViewportTracking1=[c("Stratcom").listen("m:jewel:flyout:open",null,function(a){a.getData().jewel==="notifications"&&b.startRecordingTimeTrackingData()}),c("Stratcom").listen("m:jewel:flyout:close",null,function(a){a.getData().jewel==="notifications"&&b.stopRecordingTimeTrackingData()}),c("Stratcom").listen("unload",null,function(){b.stopRecordingTimeTrackingData()})];this.isTimeTrackingEnabled=!0};e.getAllStories=function(){var a=c("ge")("notifications_flyout");return!a?[]:d("DOM").scry(a,"div",h)};e.getTimeout=function(){return 1};e.getDataToLog=function(a){return d("MLegacyDataStore").get(a).logging_data};e.getMinSizeToBeVisible=function(a){return 0};e.getStoryID=function(a){return a.id};e.getTimetrackingDataToLog=function(a){var b={};Object.assign(b,d("MLegacyDataStore").get(a.story).logging_data);b.unit_type=b.interacted_story_type;delete b.interacted_story_type;b.first_appear_time=a.evp_ts/1e3;b.vpvd_time_delta=Math.round(a.vpvd);var c=this.getAllStories();b.unit_count=c.length;b.unit_position=c.indexOf(a.story);return b};e.sendDataToLog=function(a){if(!a.vpvd_time_delta)return;d("MarauderLogger").log("reaction_unit_impression","reaction_units",a)};return a}(c("MViewportTracking"));function a(a){new i().init(a)}g.init=a}),98);
__d("MReactionLogging",["MLegacyDataStore","MReactionUnitViewportTracking","MarauderLogger","Stratcom"],(function(a,b,c,d,e,f,g){var h="reaction_logging",i=[];function a(a){d("MReactionUnitViewportTracking").init(a);if(i.length)return;i=[c("Stratcom").listen("click",h,function(a){a=a.getNode(h);a instanceof HTMLElement&&j(a)}),c("Stratcom").listen("reaction-unit-expiration",null,function(a){d("MarauderLogger").log("reaction_unit_did_timeout","reaction_units",a.getData())})]}function j(a){a=d("MLegacyDataStore").get(a).logging_data;d("MarauderLogger").log("reaction_unit_interaction","guide_cards_null_state",a)}g.init=a}),98);
__d("MReactionUnitExpirations",["MLocationPrompt","MRequest","Stratcom","ThisControllerNoLongerExists","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h={},i=[],j=1e3*60*10;function a(){if(i.length)return;i=[c("Stratcom").listen(c("MLocationPrompt").STRATCOM_UPDATE,null,function(a){l(a.getData().position.coords)})];c("setTimeoutAcrossTransitions")(k,j)}function b(a,b,d){h[a]={unit_type:d,expiration:b},b.radius&&c("MLocationPrompt").getCoords()&&m(a,c("MLocationPrompt").getCoords())}function k(){var a=Date.now()/1e3;for(var b in h)a>h[b].expiration.timestamp&&n(b);c("setTimeoutAcrossTransitions")(k,j)}function l(a){if(!a||a.latitude===void 0||a.longitude===void 0)return;for(var b in h)m(b,a)}function m(a,b){var c=h[a].expiration;c.radius&&o(c.latitude,c.longitude,b.latitude,b.longitude)>c.radius&&n(a)}function n(a){var b=d("ThisControllerNoLongerExists").__DEADBUILDER__("re0pnqd6s").setString("id",a),e=c("MLocationPrompt").getCoords();e&&b.setFloat("lat",e.latitude).setFloat("long",e.longitude);c("Stratcom").invoke("reaction-unit-expiration",null,{unit_type:h[a].unit_type});new(c("MRequest"))(b.getURI().toString()).send();delete h[a]}function o(a,b,c,d){var e=6371e3,f=p(c-a);d=p(d-b);b=Math.sin(f/2)*Math.sin(f/2)+Math.cos(p(a))*Math.cos(p(c))*Math.sin(d/2)*Math.sin(d/2);f=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return e*f}function p(a){return a*(Math.PI/180)}g.init=a;g.updateUnitExpiration=b}),98);